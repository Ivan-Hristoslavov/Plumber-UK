(()=>{var e={};e.id=16,e.ids=[16],e.modules={3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},11997:e=>{"use strict";e.exports=require("punycode")},17829:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>n});var t=r(60687),a=r(43210);function n(){let[e,s]=(0,a.useState)(null),[r,n]=(0,a.useState)(!1),[i,o]=(0,a.useState)("individual"),[l,d]=(0,a.useState)({name:"",email:"",phone:"",address:"",companyName:"",companyEmail:"",companyPhone:"",companyAddress:"",vat:"",contactPerson:"",contactEmail:"",contactPhone:""}),[c,m]=(0,a.useState)(""),[u,x]=(0,a.useState)([]),[p,h]=(0,a.useState)(!0),g=async()=>{try{h(!0),console.log("Loading customers...");let e=await fetch("/api/customers");if(console.log("Response status:",e.status),e.ok){let s=await e.json();console.log("Loaded customers:",s),x(s)}else{let s=await e.text();console.error("Failed to load customers:",e.status,s)}}catch(e){console.error("Error loading customers:",e)}finally{h(!1)}},y=async e=>{e.preventDefault(),m("");try{let e;if("individual"===i){if(!l.name||!l.email||!l.phone||!l.address)return void m("Please fill in all required fields.");e={name:l.name,email:l.email,phone:l.phone,address:l.address,customer_type:"individual"}}else{if(!l.companyName||!l.companyEmail||!l.companyPhone||!l.companyAddress)return void m("Please fill in all required fields.");e={name:l.companyName,email:l.companyEmail,phone:l.companyPhone,address:l.companyAddress,customer_type:"company",company_name:l.companyName,vat_number:l.vat||null,contact_person:l.contactPerson||null,contact_email:l.contactEmail||null,contact_phone:l.contactPhone||null}}let s=await fetch("/api/customers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(s.ok)await g(),n(!1),o("individual"),d({name:"",email:"",phone:"",address:"",companyName:"",companyEmail:"",companyPhone:"",companyAddress:"",vat:"",contactPerson:"",contactEmail:"",contactPhone:""});else{let e=await s.json();m(e.error||"Failed to create customer")}}catch(e){console.error("Error creating customer:",e),m("Failed to create customer")}};return(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Customers"}),(0,t.jsx)("button",{onClick:()=>n(!0),className:"px-4 py-2 text-sm font-medium text-white bg-primary rounded-lg hover:bg-primary-dark",children:"Add Customer"})]}),(0,t.jsx)("div",{className:"bg-white shadow rounded-lg overflow-x-auto",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Address"}),(0,t.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:p?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:"Loading customers..."})}):0===u.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500",children:"No customers found. Add your first customer using the button above."})}):u.map(e=>(0,t.jsxs)("tr",{children:[(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[e.name,"company"===e.customer_type&&e.contact_person&&(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["Contact: ",e.contact_person]})]}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(0,t.jsx)("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${"individual"===e.customer_type?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:"individual"===e.customer_type?"Individual":"Company"})}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.email}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.phone}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:e.address}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,t.jsx)("button",{onClick:()=>s(e),className:"px-3 py-1.5 bg-white border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"View"})})]},e.id))})]})}),r&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full max-h-[80vh] relative",children:[(0,t.jsx)("button",{type:"button",onClick:()=>n(!1),className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 focus:outline-none","aria-label":"Close",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),(0,t.jsxs)("form",{className:"p-8 space-y-6 overflow-y-auto max-h-[70vh]",onSubmit:y,children:[(0,t.jsx)("h2",{className:"text-2xl font-bold mb-4 text-primary",children:"Add Customer"}),(0,t.jsxs)("div",{className:"flex space-x-2 mb-6",children:[(0,t.jsx)("button",{type:"button",className:`flex-1 px-4 py-2 rounded-lg font-medium border transition-colors duration-150 ${"individual"===i?"bg-primary text-white border-primary shadow":"bg-gray-50 text-gray-700 border-gray-300 hover:bg-gray-100"}`,onClick:()=>o("individual"),children:"Individual"}),(0,t.jsx)("button",{type:"button",className:`flex-1 px-4 py-2 rounded-lg font-medium border transition-colors duration-150 ${"company"===i?"bg-primary text-white border-primary shadow":"bg-gray-50 text-gray-700 border-gray-300 hover:bg-gray-100"}`,onClick:()=>o("company"),children:"Company"})]}),c&&(0,t.jsx)("div",{className:"text-red-600 text-sm mb-2",children:c}),"individual"===i?(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Name",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{className:"block w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-primary focus:border-primary transition",value:l.name,onChange:e=>d(s=>({...s,name:e.target.value})),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Email",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"email",className:"block w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-primary focus:border-primary transition",value:l.email,onChange:e=>d(s=>({...s,email:e.target.value})),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Phone",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{className:"block w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-primary focus:border-primary transition",value:l.phone,onChange:e=>d(s=>({...s,phone:e.target.value})),required:!0})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Address",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{className:"block w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-primary focus:border-primary transition",value:l.address,onChange:e=>d(s=>({...s,address:e.target.value})),required:!0})]})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Company Details"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Company Name",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{className:"block w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-primary focus:border-primary transition",value:l.companyName,onChange:e=>d(s=>({...s,companyName:e.target.value})),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Company Email",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{type:"email",className:"block w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-primary focus:border-primary transition",value:l.companyEmail,onChange:e=>d(s=>({...s,companyEmail:e.target.value})),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Company Phone",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{className:"block w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-primary focus:border-primary transition",value:l.companyPhone,onChange:e=>d(s=>({...s,companyPhone:e.target.value})),required:!0})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Company Address",(0,t.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,t.jsx)("input",{className:"block w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-primary focus:border-primary transition",value:l.companyAddress,onChange:e=>d(s=>({...s,companyAddress:e.target.value})),required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"VAT Number"}),(0,t.jsx)("input",{className:"block w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-primary focus:border-primary transition",value:l.vat,onChange:e=>d(s=>({...s,vat:e.target.value}))})]})]}),(0,t.jsx)("div",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Contact Person (optional)"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Person"}),(0,t.jsx)("input",{className:"block w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-primary focus:border-primary transition",value:l.contactPerson,onChange:e=>d(s=>({...s,contactPerson:e.target.value}))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Email"}),(0,t.jsx)("input",{type:"email",className:"block w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-primary focus:border-primary transition",value:l.contactEmail,onChange:e=>d(s=>({...s,contactEmail:e.target.value}))})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Phone"}),(0,t.jsx)("input",{className:"block w-full border border-gray-300 rounded-lg p-3 focus:ring-2 focus:ring-primary focus:border-primary transition",value:l.contactPhone,onChange:e=>d(s=>({...s,contactPhone:e.target.value}))})]})]})]}),(0,t.jsxs)("div",{className:"mt-8 flex justify-end space-x-2",children:[(0,t.jsx)("button",{type:"button",onClick:()=>n(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-primary rounded-lg hover:bg-primary-dark shadow",children:"Add Customer"})]})]})]})}),e&&(0,t.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:(0,t.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-lg w-full",children:(0,t.jsxs)("div",{className:"p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,t.jsx)("h2",{className:"text-xl font-bold",children:"Customer Details"}),(0,t.jsx)("button",{onClick:()=>s(null),className:"text-gray-400 hover:text-gray-500",children:(0,t.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Name:"})," ",e.name]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Email:"})," ",e.email]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Phone:"})," ",e.phone]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"font-medium",children:"Address:"})," ",e.address]})]}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"Bookings"}),(0,t.jsx)("ul",{className:"space-y-1",children:e.bookings&&e.bookings.length>0?e.bookings.map(e=>(0,t.jsxs)("li",{className:"text-sm text-gray-700",children:[e.date,": ",e.service," (\xa3",e.amount,") - ",(0,t.jsx)("span",{className:"capitalize",children:e.status})," / ",(0,t.jsx)("span",{className:"capitalize",children:e.paymentStatus})]},e.id)):(0,t.jsx)("li",{className:"text-sm text-gray-500",children:"No bookings found"})})]}),(0,t.jsxs)("div",{className:"mt-4",children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"Payments"}),(0,t.jsx)("ul",{className:"space-y-1",children:e.payments&&e.payments.length>0?e.payments.map(e=>(0,t.jsxs)("li",{className:"text-sm text-gray-700",children:[e.date,": \xa3",e.amount," - ",(0,t.jsx)("span",{className:"capitalize",children:e.status})]},e.id)):(0,t.jsx)("li",{className:"text-sm text-gray-500",children:"No payments found"})})]}),(0,t.jsx)("div",{className:"mt-6 flex justify-end",children:(0,t.jsx)("button",{onClick:()=>s(null),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50",children:"Close"})})]})})})]})}},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},22006:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>i.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var t=r(65239),a=r(48088),n=r(88170),i=r.n(n),o=r(30893),l={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(s,l);let d={children:["",{children:["admin",{children:["customers",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,98555)),"/Users/ivanivanov/Documents/Projects/Plumbe-2/app/admin/customers/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,97786)),"/Users/ivanivanov/Documents/Projects/Plumbe-2/app/admin/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,58014)),"/Users/ivanivanov/Documents/Projects/Plumbe-2/app/layout.tsx"],error:[()=>Promise.resolve().then(r.bind(r,52608)),"/Users/ivanivanov/Documents/Projects/Plumbe-2/app/error.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,57398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,89999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,65284,23)),"next/dist/client/components/unauthorized-error"]}]}.children,c=["/Users/ivanivanov/Documents/Projects/Plumbe-2/app/admin/customers/page.tsx"],m={require:r,loadChunk:()=>Promise.resolve()},u=new t.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/admin/customers/page",pathname:"/admin/customers",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},27775:(e,s,r)=>{Promise.resolve().then(r.bind(r,17829))},27910:e=>{"use strict";e.exports=require("stream")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},34631:e=>{"use strict";e.exports=require("tls")},55511:e=>{"use strict";e.exports=require("crypto")},55591:e=>{"use strict";e.exports=require("https")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},74075:e=>{"use strict";e.exports=require("zlib")},79428:e=>{"use strict";e.exports=require("buffer")},79551:e=>{"use strict";e.exports=require("url")},81630:e=>{"use strict";e.exports=require("http")},91645:e=>{"use strict";e.exports=require("net")},94735:e=>{"use strict";e.exports=require("events")},97511:(e,s,r)=>{Promise.resolve().then(r.bind(r,98555))},98555:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>t});let t=(0,r(12907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/ivanivanov/Documents/Projects/Plumbe-2/app/admin/customers/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/ivanivanov/Documents/Projects/Plumbe-2/app/admin/customers/page.tsx","default")}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[447,374,317,271],()=>r(22006));module.exports=t})();