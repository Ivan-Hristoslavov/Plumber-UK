(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7122],{33168:(e,s,a)=>{"use strict";a.d(s,{N:()=>r});let r=(0,a(55647).UU)("https://ilkalkvghslckvmpkxbb.supabase.co/","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imlsa2Fsa3ZnaHNsY2t2bXBreGJiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAxNTYwNjEsImV4cCI6MjA2NTczMjA2MX0.w5c4TW1GsnCDKgFAGFabhbbt1X9pHqN8tzpvgBPsjEg")},37791:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>l});var r=a(95155),t=a(12115),n=a(33168);let i={businessName:"Fix My Leak",businessEmail:"info@fixmyleak.com",businessPhone:"+44 7700 900123",businessAddress:"London, UK",emergencyRate:"150",standardRate:"75",dayOffEnabled:!1,dayOffMessage:"Limited service hours today. Emergency services available 24/7.",dayOffStartDate:"",dayOffEndDate:"",emailNotifications:!0,smsNotifications:!1,autoConfirmBookings:!1,workingHoursStart:"08:00",workingHoursEnd:"18:00",workingDays:["monday","tuesday","wednesday","thursday","friday"]};function l(){let[e,s]=(0,t.useState)(i),[a,l]=(0,t.useState)(!0),[o,d]=(0,t.useState)(!1),[c,m]=(0,t.useState)("");(0,t.useEffect)(()=>{u()},[]);let u=async()=>{try{let{data:e,error:a}=await n.N.from("admin_settings").select("*");if(a)console.error("Error loading settings:",a);else{let a={...i};null==e||e.forEach(e=>{if(e.key in a){let s=e.value;"dayOffEnabled"===e.key||"emailNotifications"===e.key||"smsNotifications"===e.key||"autoConfirmBookings"===e.key?a[e.key]="true"===s:"workingDays"===e.key?a[e.key]=JSON.parse(s):a[e.key]=s}}),s(a)}}catch(e){console.error("Error:",e)}finally{l(!1)}},g=async(e,s)=>{try{let a="object"==typeof s?JSON.stringify(s):String(s),{error:r}=await n.N.from("admin_settings").upsert({key:e,value:a});if(r)throw console.error("Error saving setting:",r),r}catch(e){throw console.error("Error:",e),e}},x=async()=>{d(!0),m("");try{let s=Object.entries(e).map(e=>{let[s,a]=e;return g(s,a)});await Promise.all(s),m("Settings saved successfully!"),setTimeout(()=>m(""),3e3)}catch(e){m("Error saving settings. Please try again."),setTimeout(()=>m(""),3e3)}finally{d(!1)}},b=(e,a)=>{s(s=>({...s,[e]:a}))},f=e=>{s(s=>({...s,workingDays:s.workingDays.includes(e)?s.workingDays.filter(s=>s!==e):[...s.workingDays,e]}))};return a?(0,r.jsxs)("div",{className:"flex justify-center items-center py-12",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,r.jsx)("span",{className:"ml-3 text-gray-600",children:"Loading settings..."})]}):(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Settings"}),(0,r.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage your business settings and preferences."})]}),(0,r.jsx)("button",{onClick:x,disabled:o,className:"flex items-center px-6 py-3 text-sm font-medium text-white bg-blue-600 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}),"Saving..."]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("svg",{className:"w-4 h-4 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save Settings"]})})]}),c&&(0,r.jsx)("div",{className:"p-4 rounded-lg ".concat(c.includes("Error")?"bg-red-50 text-red-700":"bg-green-50 text-green-700"),children:c}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Business Information"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Name"}),(0,r.jsx)("input",{type:"text",value:e.businessName,onChange:e=>b("businessName",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Email"}),(0,r.jsx)("input",{type:"email",value:e.businessEmail,onChange:e=>b("businessEmail",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Phone"}),(0,r.jsx)("input",{type:"tel",value:e.businessPhone,onChange:e=>b("businessPhone",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Business Address"}),(0,r.jsx)("input",{type:"text",value:e.businessAddress,onChange:e=>b("businessAddress",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Pricing"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Standard Hourly Rate (\xa3)"}),(0,r.jsx)("input",{type:"number",value:e.standardRate,onChange:e=>b("standardRate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Emergency Rate (\xa3)"}),(0,r.jsx)("input",{type:"number",value:e.emergencyRate,onChange:e=>b("emergencyRate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Working Hours"}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Time"}),(0,r.jsx)("input",{type:"time",value:e.workingHoursStart,onChange:e=>b("workingHoursStart",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Time"}),(0,r.jsx)("input",{type:"time",value:e.workingHoursEnd,onChange:e=>b("workingHoursEnd",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Working Days"}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3",children:["monday","tuesday","wednesday","thursday","friday","saturday","sunday"].map(s=>(0,r.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,r.jsx)("input",{type:"checkbox",checked:e.workingDays.includes(s),onChange:()=>f(s),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("span",{className:"text-sm text-gray-700 capitalize",children:s})]},s))})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Day Off Settings"}),(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("input",{type:"checkbox",id:"dayOffEnabled",checked:e.dayOffEnabled,onChange:e=>b("dayOffEnabled",e.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("label",{htmlFor:"dayOffEnabled",className:"text-sm font-medium text-gray-700",children:"Enable Day Off Banner"})]}),e.dayOffEnabled&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Day Off Message"}),(0,r.jsx)("textarea",{value:e.dayOffMessage,onChange:e=>b("dayOffMessage",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),(0,r.jsx)("input",{type:"date",value:e.dayOffStartDate,onChange:e=>b("dayOffStartDate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),(0,r.jsx)("input",{type:"date",value:e.dayOffEndDate,onChange:e=>b("dayOffEndDate",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Notifications"}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("input",{type:"checkbox",id:"emailNotifications",checked:e.emailNotifications,onChange:e=>b("emailNotifications",e.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("label",{htmlFor:"emailNotifications",className:"text-sm font-medium text-gray-700",children:"Email Notifications"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("input",{type:"checkbox",id:"smsNotifications",checked:e.smsNotifications,onChange:e=>b("smsNotifications",e.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("label",{htmlFor:"smsNotifications",className:"text-sm font-medium text-gray-700",children:"SMS Notifications"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,r.jsx)("input",{type:"checkbox",id:"autoConfirmBookings",checked:e.autoConfirmBookings,onChange:e=>b("autoConfirmBookings",e.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),(0,r.jsx)("label",{htmlFor:"autoConfirmBookings",className:"text-sm font-medium text-gray-700",children:"Auto-confirm Bookings"})]})]})]})]})}},91925:(e,s,a)=>{Promise.resolve().then(a.bind(a,37791))}},e=>{var s=s=>e(e.s=s);e.O(0,[5647,8441,1684,7358],()=>s(91925)),_N_E=e.O()}]);