(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8767],{3496:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>n});var t=a(95155),l=a(12115),r=a(33168);function n(){let e=new Date().toISOString().split("T")[0],[s,a]=(0,l.useState)({isEnabled:!1,message:"Limited service hours today. Emergency services available 24/7.",startDate:e,endDate:e,showOnAllPages:!0}),[n,i]=(0,l.useState)(!1),[o,d]=(0,l.useState)(""),[c,m]=(0,l.useState)(!0);(0,l.useEffect)(()=>{x()},[]);let x=async()=>{try{console.log("Loading Day Off settings from database...");let{data:s,error:t}=await r.N.from("admin_settings").select("key, value").eq("key","dayOffSettings").single();if(t)console.error("Error loading settings:",t),"PGRST116"===t.code&&console.log("No Day Off settings found, using defaults");else if(console.log("Loaded settings from database:",s),null==s?void 0:s.value){let t=s.value,l={isEnabled:t.isEnabled||!1,message:t.message||"Limited service hours today. Emergency services available 24/7.",startDate:t.startDate||e,endDate:t.endDate||e,showOnAllPages:t.showOnAllPages||!1};console.log("Processed settings object:",l),a(l)}}catch(e){console.error("Unexpected error loading settings:",e)}finally{m(!1)}},g=async()=>{try{let e,a={isEnabled:s.isEnabled,message:s.message,startDate:s.startDate,endDate:s.endDate,showOnAllPages:s.showOnAllPages};console.log("Saving Day Off settings:",a);let{data:t,error:l}=await r.N.from("admin_settings").select("id").eq("key","dayOffSettings").single();if(l&&"PGRST116"===l.code)console.log("Creating new dayOffSettings record"),e=await r.N.from("admin_settings").insert({key:"dayOffSettings",value:a});else if(t)console.log("Updating existing dayOffSettings record"),e=await r.N.from("admin_settings").update({value:a}).eq("key","dayOffSettings");else throw Error("Unexpected error checking for existing record");if(e.error)throw console.error("Supabase error saving settings:",e.error),Error("Failed to save Day Off settings: ".concat(e.error.message));console.log("Successfully saved Day Off settings:",e.data)}catch(e){throw console.error("Unexpected error:",e),e}},h=async()=>{i(!0),d("");try{console.log("Starting to save Day Off settings:",s),await g(),console.log("Day Off settings saved successfully"),d("Settings saved successfully!"),setTimeout(()=>d(""),3e3)}catch(s){console.error("Failed to save settings:",s);let e=s instanceof Error?s.message:"Unknown error occurred";d("Error saving settings: ".concat(e)),setTimeout(()=>d(""),5e3)}finally{i(!1)}},u=(e,s)=>{a(a=>{let t={...a,[e]:s};return"startDate"===e&&s>a.endDate&&(t.endDate=s),t})},f=(()=>{if(s.endDate&&s.isEnabled){let e=new Date;if(new Date(e.getFullYear(),e.getMonth(),e.getDate())>new Date(s.endDate))return!0}return!1})();return c?(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,t.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,t.jsxs)("div",{className:"animate-pulse",children:[(0,t.jsx)("div",{className:"h-8 bg-gray-200 rounded mb-6"}),(0,t.jsxs)("div",{className:"bg-white rounded-xl p-6",children:[(0,t.jsx)("div",{className:"h-6 bg-gray-200 rounded mb-4"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,t.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"})]})]})})}):(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Day Off Management"}),(0,t.jsx)("p",{className:"text-gray-600 mt-1",children:"Configure your day off settings and customer notifications."})]}),(0,t.jsx)("button",{onClick:h,disabled:n,className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white rounded-lg font-medium transition-colors flex items-center space-x-2",children:n?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,t.jsx)("span",{children:"Saving..."})]}):(0,t.jsx)("span",{children:"Save Settings"})})]}),o&&(0,t.jsx)("div",{className:"p-4 rounded-lg ".concat(o.includes("Error")?"bg-red-50 text-red-700":"bg-green-50 text-green-700"),children:o}),f&&(0,t.jsx)("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)("svg",{className:"w-5 h-5 text-orange-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,t.jsx)("p",{className:"text-orange-800 font-medium",children:"Day off period has expired and will be automatically disabled when customers visit the site."})]})}),(0,t.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:(0,t.jsx)("div",{className:"p-6",children:(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,t.jsx)("div",{className:"p-3 rounded-full ".concat(s.isEnabled?"bg-yellow-100":"bg-green-100"),children:s.isEnabled?(0,t.jsx)("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z"})}):(0,t.jsx)("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"Day Off Status"}),(0,t.jsx)("p",{className:"text-sm mt-1 ".concat(s.isEnabled?"text-yellow-600":"text-green-600"),children:s.isEnabled?"Day off mode is currently ACTIVE":"Day off mode is currently INACTIVE"}),s.isEnabled&&(s.startDate||s.endDate)&&(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[s.startDate&&"From: ".concat(new Date(s.startDate).toLocaleDateString("en-GB")),s.startDate&&s.endDate&&" - ",s.endDate&&"Until: ".concat(new Date(s.endDate).toLocaleDateString("en-GB"))]})]})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,t.jsx)("span",{className:"text-sm font-medium ".concat(s.isEnabled?"text-yellow-600":"text-gray-500"),children:s.isEnabled?"Active":"Inactive"}),(0,t.jsx)("button",{onClick:()=>{a(e=>({...e,isEnabled:!e.isEnabled}))},className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ".concat(s.isEnabled?"bg-yellow-500":"bg-gray-200"),children:(0,t.jsx)("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform ".concat(s.isEnabled?"translate-x-6":"translate-x-1")})})]})]})})}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-gray-100",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Day Off Configuration"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Configure your day off message and display settings."})]}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Day Off Message",(0,t.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),(0,t.jsx)("textarea",{value:s.message,onChange:e=>u("message",e.target.value),rows:4,className:"w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",placeholder:"Enter the message to display when day off mode is active..."}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-2",children:"This message will be displayed to customers when day off mode is enabled."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Date Range (Optional)"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:"Start Date"}),(0,t.jsx)("input",{type:"date",value:s.startDate,min:e,onChange:e=>u("startDate",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-2",children:"End Date"}),(0,t.jsx)("input",{type:"date",value:s.endDate,min:s.startDate||e,onChange:e=>u("endDate",e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg shadow-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]})]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["If specified, the banner will automatically appear/disappear based on these dates.",(0,t.jsx)("strong",{children:" Day off will be automatically disabled after the end date."})]})]}),(0,t.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,t.jsx)("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Display Options"}),(0,t.jsxs)("label",{className:"flex items-start space-x-3",children:[(0,t.jsx)("input",{type:"checkbox",checked:s.showOnAllPages,onChange:e=>u("showOnAllPages",e.target.checked),className:"mt-1 h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Show banner on all pages"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Display a sticky notification banner at the top of all website pages when day off mode is active."})]})]})]})]})]}),s.isEnabled&&(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[(0,t.jsxs)("div",{className:"p-6 border-b border-gray-100",children:[(0,t.jsx)("h2",{className:"text-lg font-semibold text-gray-900",children:"Banner Preview"}),(0,t.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"This is how the banner will appear to customers."})]}),(0,t.jsx)("div",{className:"p-6",children:(0,t.jsx)("div",{className:"bg-yellow-400 border border-yellow-500 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("svg",{className:"h-5 w-5 text-yellow-800 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,t.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-yellow-800 mb-2",children:"Day Off Notice"}),(0,t.jsx)("p",{className:"text-yellow-700 leading-relaxed",children:s.message}),(s.startDate||s.endDate)&&(0,t.jsxs)("div",{className:"mt-4 p-3 bg-yellow-100 rounded-lg",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-yellow-800",children:"\uD83D\uDCC5 Schedule:"}),(0,t.jsxs)("p",{className:"text-sm text-yellow-700 mt-1",children:[s.startDate&&"From: ".concat(new Date(s.startDate).toLocaleDateString("en-GB",{weekday:"long",year:"numeric",month:"long",day:"numeric"})),s.startDate&&s.endDate&&(0,t.jsx)("br",{}),s.endDate&&"Until: ".concat(new Date(s.endDate).toLocaleDateString("en-GB",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))]})]})]})]}),(0,t.jsx)("button",{className:"flex-shrink-0 text-yellow-600 hover:text-yellow-700",children:(0,t.jsx)("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})})]}),(0,t.jsx)("div",{className:"bg-blue-50 rounded-xl border border-blue-200 p-6",children:(0,t.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,t.jsx)("svg",{className:"w-6 h-6 text-blue-600 mt-0.5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,t.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-blue-900 mb-2",children:"How Day Off Mode Works"}),(0,t.jsxs)("div",{className:"text-blue-800 space-y-2 text-sm",children:[(0,t.jsxs)("p",{children:["• ",(0,t.jsx)("strong",{children:"Automatic Management:"})," Set start and end dates, and the system will automatically show/hide the banner"]}),(0,t.jsxs)("p",{children:["• ",(0,t.jsx)("strong",{children:"Auto-Disable:"})," Day off mode automatically turns off after the end date passes"]}),(0,t.jsxs)("p",{children:["• ",(0,t.jsx)("strong",{children:"Database Storage:"})," All settings are saved to the database and sync across all pages"]}),(0,t.jsxs)("p",{children:["• ",(0,t.jsx)("strong",{children:"Customer Experience:"})," Customers see a professional notice banner at the top of all pages"]}),(0,t.jsxs)("p",{children:["• ",(0,t.jsx)("strong",{children:"Emergency Contact:"})," Include emergency contact information in your message for urgent matters"]})]})]})]})})]})})}},33168:(e,s,a)=>{"use strict";a.d(s,{N:()=>t});let t=(0,a(55647).UU)("https://ilkalkvghslckvmpkxbb.supabase.co/","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imlsa2Fsa3ZnaHNsY2t2bXBreGJiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAxNTYwNjEsImV4cCI6MjA2NTczMjA2MX0.w5c4TW1GsnCDKgFAGFabhbbt1X9pHqN8tzpvgBPsjEg")},51400:(e,s,a)=>{Promise.resolve().then(a.bind(a,3496))}},e=>{var s=s=>e(e.s=s);e.O(0,[5647,8441,1684,7358],()=>s(51400)),_N_E=e.O()}]);